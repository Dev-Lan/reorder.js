(function(a){reorder={version:"0.0.1"},reorder.dist=function(){function b(b){var c=b.length,d=[];for(var e=0;e<c;e++){d[e]=[];for(var f=0;f<c;f++)e===f?d[e][f]=Infinity:f<e?d[e][f]=d[f][e]:d[e][f]=a(b[e],b[f])}}var a=science.stats.distance.euclidean;return b.distance=function(c){return arguments.length?(a=c,b):a},b},reorder.random=function(a){var b=[],c;for(c=0;c<a;c++)b.push(c);for(c=0;c<a-1;c++){var d=Math.floor(Math.random()*(a-c))+c;if(d!=c){var e=b[d];b[d]=b[c],b[c]=e}}return b},reorder.permute=function(a,b){var c=a.slice(0);for(var d=0;d<a.length;d++)a[d]=c[b[d]];return a},reorder.leafOrder=function(){function e(a){return a==null?[]:d(a)?[a.observation]:e(a.left).concat(e(a.right))}function f(b,c,g){if(d(b))return[0,[b]];var h=b.left,i=b.right,j=e(h),k=e(i),l,m;if(j.indexOf(c)!=-1&&k.indexOf(g)!=-1)l=h,m=i;else{if(k.indexOf(c)==-1||j.indexOf(g)==-1)throw{error:"Node is not common ancestor of "+c+", "+g};l=i,m=h}var n=leaver(l.left),o=e(l.right),p=o.indexOf(c)!=-1?n:o;p.length==0&&(p=[c]);var q=e(m.left),r=e(m.right),s=r.indexOf(g)!=-1?q:r;s.length==0&&(s=[g]);var t=Infinity,u=[];for(var v in p){var w=f(l,c,v);for(var h in s){var x=f(m,h,g),y=w[0]+a[v][h]+x[0];y<max&&(max=y,u=w.order.concat(x.order))}}return[max,u]}function f(a){var b=Infinity,c=[],d=e(a.left),g=e(a.right);for(var h in d)for(var i in g){var j=f(a,h.j);j[0]<b&&(b=j[0],c=j[1])}return c}function g(c){var d=science.stats.hcluster().distance(b);return a=reorder.dist().distance(b)(c),f(d(c))}var a=null,b=science.stats.distance.euclidean,c=null,d=function(a){return a.depth==0};return g.distance=function(a){return arguments.length?(b=a,g):b},g}})(this);